<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0"	xmlns:xsl="http://www.w3.org/1999/XSL/Transform">		<xsl:template match="/data">		<xsl:apply-templates select=".//dci" mode="graph"/>	</xsl:template>		<xsl:template match="dci" mode="graph">		<xsl:variable name="dci" select="."/>		<xsl:variable name="yearCount" select="count(year)"/>		<xsl:variable name="monthCount" select="count(month)"/>				<graph scaleX="50" scaleY="10" 			padding-bottom="80" padding-top="20" padding-left="40" padding-right="20"			title="Timeline of DCI #{$dci/@number}"			_dci="{$dci/@number}">			<xAxis min="0" max="{$yearCount * $monthCount}" size="0">				<xsl:for-each select="$dci/year">					<xsl:variable name="offset" select="(position() - 1) * $monthCount"/>					<xsl:for-each select="$dci/month">						<label position="{$offset + @no - 0.5}"><xsl:value-of select="@name"/></label>					</xsl:for-each>				</xsl:for-each>			</xAxis>			<yAxis min="0" max="50" size="10">				<label position="10">10</label>				<label position="20">20</label>				<label position="30">30</label>				<label position="40">40</label>				<label position="50">50</label>			</yAxis>			<valueList>				<xsl:for-each select="$dci/year">					<xsl:sort select="@name"/>					<xsl:variable name="offset" select="(position() - 1) * $monthCount"/>					<xsl:variable name="matchList" select="$dci/match[@date-year = current()/@name]"/>					<xsl:for-each select="$dci/month">						<xsl:variable name="winList" select="$matchList[@date-month = current()/@no][@result = 'Win']"/>						<xsl:variable name="lossList" select="$matchList[@date-month = current()/@no][@result = 'Loss']"/>						<xsl:variable name="drawList" select="$matchList[@date-month = current()/@no][@result = 'Draw']"/>						<xsl:variable name="wins" select="count($winList)"/>						<xsl:variable name="losses" select="count($lossList)"/>						<xsl:variable name="draws" select="count($drawList)"/>						<value x="{$offset + @no - 1}" y="{$wins + $losses + $draws}" class="draw"/>						<value x="{$offset + @no - 1}" y="{$wins + $losses}" class="loss"/>						<value x="{$offset + @no - 1}" y="{$wins}" class="win">							<xsl:if test="$wins + $losses + $draws">								<xsl:attribute name="label">									<!--<xsl:value-of select="concat(round(100 * $wins div ($wins + $losses + $draws)), '% (', $wins, '-', $losses, '-', $draws, ')')"/>-->									<xsl:value-of select="concat($wins, '-', $losses, '-', $draws)"/>								</xsl:attribute>							</xsl:if>						</value>					</xsl:for-each>				</xsl:for-each>			</valueList>			<captionList class="dci">				<caption x="0.1" y="50">http://www.wizards.com/Magic/PlaneswalkerPoints/<xsl:value-of select="@number"/></caption>			</captionList>			<captionList class="year">				<xsl:for-each select="$dci/year">					<xsl:sort select="@name"/>					<xsl:variable name="offset" select="(position() - 1) * $monthCount"/>					<caption x="{$offset + 0.1}" y="45"><xsl:value-of select="@name"/></caption>				</xsl:for-each>			</captionList>			<captionList class="set">				<xsl:for-each select="//set">					<xsl:variable name="offset" select="(@date-year - $dci/year/@name) * $monthCount"/>					<caption x="{$offset - 1.25 + @date-month + @date-day div 30}" y="{- 2.25 * (1 + position() mod 2)}" href="{@href}"><xsl:value-of select="."/></caption>				</xsl:for-each>			</captionList>		</graph>	</xsl:template></xsl:stylesheet>